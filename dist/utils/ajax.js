"use strict";function ajax(t){if(!t.url)throw new Error("url的参数时必填的");var e,r={type:"get",async:!0};for(e in t)r[e]=t[e];if("get"!=r.type&&"post"!=r.type)throw new Error("type参数只能为get 或者 post");if("[object Boolean]"!=Object.prototype.toString.call(r.async))throw new Error("async 的值只能为布尔值");if(r.data){var a=Object.prototype.toString.call(r.data);if("[object String]"!=a&&"[object Object]"!=a)throw new Error("data的格式只能为key=value&key=value 或者 {key:value}");if("[object Object]"==a){var o,n="";for(o in r.data)n+=o+"="+r.data[o]+"&";r.data=n.substr(0,n.length-1)}if("[object String]"==a&&!r.data.includes("="))throw new Error("data格式只能为key=value")}if(!r.success)throw new Error("success是必须存在的参数");if("[object Function]"!=Object.prototype.toString.call(r.success))throw new Error("success必须是函数");try{var c=new XMLHttpRequest;"get"==r.type?(c.open(r.type,r.url+(r.data?"?"+r.data:""),r.async),c.send()):"post"==r.type&&(c.open(r.type,r.url,r.async),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(r.data)),r.async?c.onload=function(){r.success(c.responseText)}:r.success(JSON.parse(c.responseText))}catch(t){r.error(t)}}function pAjax(t){return new Promise(function(e,r){ajax({url:t.url,data:t.data,type:t.type||"get",async:t.async||!0,success:function(t){e(t)},error:function(t){r(t)}})})}